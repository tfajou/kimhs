"use strict";var Kn=Object.create;var me=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var tr=Object.getOwnPropertyNames;var nr=Object.getPrototypeOf,rr=Object.prototype.hasOwnProperty;var C=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),or=(e,t)=>{for(var n in t)me(e,n,{get:t[n],enumerable:!0})},ut=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of tr(t))!rr.call(e,i)&&i!==n&&me(e,i,{get:()=>t[i],enumerable:!(o=er(t,i))||o.enumerable});return e};var p=(e,t,n)=>(n=e!=null?Kn(nr(e)):{},ut(t||!e||!e.__esModule?me(n,"default",{value:e,enumerable:!0}):n,e)),ir=e=>ut(me({},"__esModule",{value:!0}),e);var oe=C((ii,Ct)=>{"use strict";var sr=Object.create,pe=Object.defineProperty,ar=Object.getOwnPropertyDescriptor,cr=Object.getOwnPropertyNames,ur=Object.getPrototypeOf,lr=Object.prototype.hasOwnProperty,dr=(e,t)=>{for(var n in t)pe(e,n,{get:t[n],enumerable:!0})},dt=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cr(t))!lr.call(e,i)&&i!==n&&pe(e,i,{get:()=>t[i],enumerable:!(o=ar(t,i))||o.enumerable});return e},_e=(e,t,n)=>(n=e!=null?sr(ur(e)):{},dt(t||!e||!e.__esModule?pe(n,"default",{value:e,enumerable:!0}):n,e)),fr=e=>dt(pe({},"__esModule",{value:!0}),e),ft={};dr(ft,{ECommandOutputType:()=>br,EExecMode:()=>mt,EventManager:()=>pt,RemoteExecution:()=>Cr,RemoteExecutionConfig:()=>ht,RemoteExecutionNode:()=>gt});Ct.exports=fr(ft);var mr=_e(require("crypto")),pr=_e(require("dgram")),hr=_e(require("net")),Re=1,je="ue_py",ke=1e3,gr=5e3,br={INFO:"Info",WARNING:"Warning",ERROR:"Error"},mt={EXECUTE_FILE:"ExecuteFile",EXECUTE_STATEMENT:"ExecuteStatement",EVALUATE_STATEMENT:"EvaluateStatement"},W={PING:"ping",PONG:"pong",OPEN_CONNECTION:"open_connection",CLOSE_CONNECTION:"close_connection",COMMAND:"command",COMMAND_RESULT:"command_result"},pt=class{constructor(){this.eventListeners={}}emit(e,...t){let n=this.eventListeners[e]??new Set;for(let o of n)o(...t)}addEventListener(e,t){let n=this.eventListeners[e]??new Set;n.add(t),this.eventListeners[e]=n}once(e,t){let n=(...o)=>{t(...o),this.removeEventListener(e,n)};this.addEventListener(e,n)}removeEventListener(e,t){let n=this.eventListeners[e];n&&n.delete(t)}};function lt(e,t){return new Promise((n,o)=>setTimeout(()=>o(new Error(t)),e))}var ht=class{constructor(e=0,t=["239.0.0.1",6766],n="0.0.0.0",o=["127.0.0.1",6776]){this.multicastTTL=e,this.multicastGroupEndpoint=t,this.multicastBindAddress=n,this.commandEndpoint=o}},Cr=class{constructor(e=new ht){this.config=e,this.connectedNode=null,this.nodeId=mr.randomUUID(),this.events=new pt,this.broadcastConnection=new yr(this.config,this.nodeId,this.events)}get remoteNodes(){return this.broadcastConnection?.remoteNodes||[]}async start(){await this.broadcastConnection.open()}stop(){this.closeCommandConnection(),this.broadcastConnection.close()}hasCommandConnection(){return this.commandConnection!==void 0&&this.commandConnection.isOpen()}async openCommandConnection(e,t=!0,n=0){if(this.hasCommandConnection())throw new Error("A command connection is already open! Please close the current command connection first.");let o=new Promise(async(i,s)=>{this.commandConnection=new wr(this.config,this.nodeId,e,this.events),this.commandConnection.open(this.broadcastConnection).then(()=>{this.connectedNode=e,i()}).catch(s)});return n>0?Promise.race([o,lt(n,"Timed out: Could connect to the node within the given time.")]).finally(()=>{t&&this.broadcastConnection.stopSearchingForNodes()}):o.finally(()=>{t&&this.broadcastConnection.stopSearchingForNodes()})}isSearchingForNodes(){return this.broadcastConnection&&this.broadcastConnection.isSearchingForNodes()}startSearchingForNodes(e=ke){if(!this.broadcastConnection)throw new Error('No broadcast connection open! Please call and await "start" first.');this.broadcastConnection.startSearchingForNodes(e)}stopSearchingForNodes(){this.broadcastConnection&&this.broadcastConnection.stopSearchingForNodes()}closeCommandConnection(){this.commandConnection&&(this.commandConnection.close(this.broadcastConnection),this.commandConnection=void 0),this.connectedNode=null}getFirstRemoteNode(e=ke,t=0){if(!this.broadcastConnection)throw new Error('No broadcast connection open! Please call and await "start" first.');let n=new Promise((o,i)=>{this.broadcastConnection.startSearchingForNodes(e),this.isSearchingForNodes()||this.startSearchingForNodes(ke),this.events.once("nodeFound",s=>{o(s)})}).finally(()=>{this.broadcastConnection.stopSearchingForNodes()});return t>0?Promise.race([n,lt(t,"Timed out: Could not find a node within the given time.")]):n}async runCommand(e,t=!0,n=mt.EXECUTE_FILE,o=!1){if(!this.commandConnection)throw new Error('No command connection open! Please call and await "openCommandConnection" first.');let i=await this.commandConnection.runCommand(e,t,n);if(o&&!i.data?.success)throw new Error(`Failed to run command: ${i.data?.result}`);return i.data}},yr=class{constructor(e,t,n){this.config=e,this.nodeId=t,this.events=n,this.nodes={}}get remoteNodes(){return Object.values(this.nodes)}async open(){this.timeoutRemoteNodes(),this.broadcastSocket||await this.initBroadcastSocket()}close(){this.broadcastSocket&&(this.broadcastSocket.close(),this.broadcastSocket=void 0),this.stopSearchingForNodes()}isSearchingForNodes(){return this.broadcastListenThread!==void 0&&this.broadcastListenThread.unref()}startSearchingForNodes(e){this.nodes={},this.broadcastPing(),this.broadcastListenThread&&clearInterval(this.broadcastListenThread),e>0&&(this.broadcastListenThread=setInterval(this.broadcastPing.bind(this),e))}stopSearchingForNodes(){clearInterval(this.broadcastListenThread),this.nodes={}}broadcastPing(){let e=Date.now();this.broadcastMessage(new G(W.PING,this.nodeId)),this.timeoutRemoteNodes(e)}broadcastOpenConnection(e){let t={command_ip:this.config.commandEndpoint[0],command_port:this.config.commandEndpoint[1]},n=new G(W.OPEN_CONNECTION,this.nodeId,e.nodeId,t);this.broadcastMessage(n)}broadcastCloseConnection(e){let t=new G(W.CLOSE_CONNECTION,this.nodeId,e.nodeId);this.broadcastMessage(t)}initBroadcastSocket(){return new Promise((e,t)=>{if(this.broadcastSocket)return t(new Error("Broadcast socket already initialized!"));this.broadcastSocket=pr.createSocket({type:"udp4",reuseAddr:!0}),this.broadcastSocket.on("listening",()=>{this.broadcastSocket&&(this.broadcastSocket.setMulticastLoopback(!0),this.broadcastSocket.setMulticastTTL(this.config.multicastTTL),this.broadcastSocket.setMulticastInterface(this.config.multicastBindAddress),this.broadcastSocket.addMembership(this.config.multicastGroupEndpoint[0],this.config.multicastBindAddress),e())}),this.broadcastSocket.on("message",this.handleData.bind(this)),this.broadcastSocket.bind({address:this.config.multicastBindAddress,port:this.config.multicastGroupEndpoint[1]})})}broadcastMessage(e){let t=e.toJson();this.broadcastSocket?.send(t,this.config.multicastGroupEndpoint[1],this.config.multicastGroupEndpoint[0])}handleData(e,t){let n=G.fromBuffer(e);n.passesReceiveFilter(this.nodeId)&&this.handleMessage(n)}handleMessage(e){e.type===W.PONG&&this.handlePongMessage(e)}handlePongMessage(e){this.updateRemoteNode(e.source,e.data)}updateRemoteNode(e,t,n=Date.now()){let o=this.nodes[e];if(o)o.update(t,n);else if(this.isSearchingForNodes()){let i=new gt(e,t,n);this.nodes[e]=i,this.events.emit("nodeFound",i)}}timeoutRemoteNodes(e=Date.now()){for(let[t,n]of Object.entries(this.remoteNodes))n.shouldTimeout(e)&&(delete this.nodes[t],this.events.emit("nodeTimedOut",n))}},gt=class{constructor(e,t,n=Date.now()){this.nodeId=e,this.data=t,this.lastPong=n}update(e,t=Date.now()){this.data=e,this.lastPong=t}shouldTimeout(e){return this.lastPong+gr<e}},wr=class{constructor(e,t,n,o){this.config=e,this.sourceNodeId=t,this.remoteNode=n,this.events=o,this.commandQueue=[],this.isRunningCommand=!1}async open(e){if(this.isOpen())throw new Error("A command connection is already open! Please close the current command connection first.");let t=hr.createServer();return new Promise((n,o)=>{t.once("connection",i=>{this.commandChannelSocket=i,this.commandChannelSocket.on("close",this.onClose.bind(this)),n()}),t.once("error",i=>{o(i)}),t.listen(this.config.commandEndpoint[1],this.config.commandEndpoint[0],1,()=>{e.broadcastOpenConnection(this.remoteNode)})}).then(()=>{t.close()})}isOpen(){return this.commandChannelSocket!==void 0}close(e){e.broadcastCloseConnection(this.remoteNode),this.commandChannelSocket?.destroy(),this.commandChannelSocket=void 0,this.commandQueue.length>0&&(this.commandQueue.forEach(([,,t])=>t(new Error("Connection closed!"))),this.commandQueue=[])}runCommand(e,t,n){return new Promise((o,i)=>{if(!this.commandChannelSocket){i(new Error("No command channel open!"));return}let s=new G(W.COMMAND,this.sourceNodeId,this.remoteNode.nodeId,{command:e,unattended:t,exec_mode:n});this.commandQueue.push([s,o,i]),this.commandQueue.length===1&&!this.isRunningCommand&&this._runNextCommandInQue()})}_runNextCommandInQue(){if(this.commandQueue.length===0||!this.commandChannelSocket){this.isRunningCommand=!1;return}this.isRunningCommand=!0;let[e,t,n]=this.commandQueue.shift(),o="",i=s=>{o+=s.toString("utf-8");let a;try{a=JSON.parse(o)}catch{return}let u=G.fromData(a);u.type===W.COMMAND_RESULT&&u.passesReceiveFilter(this.sourceNodeId)&&(this.commandChannelSocket?.removeListener("data",i),t(u),this._runNextCommandInQue())};this.commandChannelSocket.on("data",i),this.commandChannelSocket.write(e.toJson())}onClose(e){this.events.emit("commandConnectionClosed"),this.commandChannelSocket?.destroy(),this.commandChannelSocket=void 0}},G=class bt{constructor(t,n,o,i){this.type=t,this.source=n,this.dest=o,this.data=i}passesReceiveFilter(t){return this.source!==t&&(!this.dest||this.dest===t)}toJson(){if(!this.type)throw Error('"type" cannot be empty!');if(!this.source)throw Error('"source" cannot be empty!');let t={version:Re,magic:je,source:this.source,type:this.type};return this.dest&&(t.dest=this.dest),this.data&&(t.data=this.data),JSON.stringify(t)}static fromData(t){if(t.version!==Re)throw Error(`"version" is incorrect (got ${t.version}, expected ${Re})!`);if(t.magic!==je)throw Error(`"magic" is incorrect (got "${t.magic}", expected "${je}")!`);return new bt(t.type,t.source,t.dest,t.data)}static fromBuffer(t){let n=t.toString("utf-8"),o=JSON.parse(n);return this.fromData(o)}}});var Le=C((fi,wt)=>{"use strict";var yt=require("fs"),Me;function xr(){try{return yt.statSync("/.dockerenv"),!0}catch{return!1}}function vr(){try{return yt.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}wt.exports=()=>(Me===void 0&&(Me=xr()||vr()),Me)});var Et=C((mi,Ue)=>{"use strict";var Er=require("os"),Sr=require("fs"),xt=Le(),vt=()=>{if(process.platform!=="linux")return!1;if(Er.release().toLowerCase().includes("microsoft"))return!xt();try{return Sr.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!xt():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Ue.exports=vt:Ue.exports=vt()});var Ft=C((pi,St)=>{"use strict";St.exports=(e,t,n)=>{let o=i=>Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let i=n();return o(i),i},set(i){o(i)}}),e}});var We=C((hi,Tt)=>{var Fr=require("path"),Or=require("child_process"),{promises:ge,constants:It}=require("fs"),he=Et(),Pr=Le(),Be=Ft(),Ot=Fr.join(__dirname,"xdg-open"),{platform:Y,arch:Pt}=process,Nr=()=>{try{return ge.statSync("/run/.containerenv"),!0}catch{return!1}},$e;function Ar(){return $e===void 0&&($e=Nr()||Pr()),$e}var Ir=(()=>{let e="/mnt/",t;return async function(){if(t)return t;let n="/etc/wsl.conf",o=!1;try{await ge.access(n,It.F_OK),o=!0}catch{}if(!o)return e;let i=await ge.readFile(n,{encoding:"utf8"}),s=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return s?(t=s.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),Nt=async(e,t)=>{let n;for(let o of e)try{return await t(o)}catch(i){n=i}throw n},be=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return Nt(e.app,u=>be({...e,app:u}));let{name:t,arguments:n=[]}=e.app||{};if(n=[...n],Array.isArray(t))return Nt(t,u=>be({...e,app:{name:u,arguments:n}}));let o,i=[],s={};if(Y==="darwin")o="open",e.wait&&i.push("--wait-apps"),e.background&&i.push("--background"),e.newInstance&&i.push("--new"),t&&i.push("-a",t);else if(Y==="win32"||he&&!Ar()&&!t){let u=await Ir();o=he?`${u}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),he||(s.windowsVerbatimArguments=!0);let l=["Start"];e.wait&&l.push("-Wait"),t?(l.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&n.unshift(e.target)):e.target&&l.push(`"${e.target}"`),n.length>0&&(n=n.map(m=>`"\`"${m}\`""`),l.push(n.join(","))),e.target=Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(t)o=t;else{let u=!__dirname||__dirname==="/",l=!1;try{await ge.access(Ot,It.X_OK),l=!0}catch{}o=process.versions.electron||Y==="android"||u||!l?"xdg-open":Ot}n.length>0&&i.push(...n),e.wait||(s.stdio="ignore",s.detached=!0)}e.target&&i.push(e.target),Y==="darwin"&&n.length>0&&i.push("--args",...n);let a=Or.spawn(o,i,s);return e.wait?new Promise((u,l)=>{a.once("error",l),a.once("close",m=>{if(!e.allowNonzeroExitCode&&m>0){l(new Error(`Exited with code ${m}`));return}u(a)})}):(a.unref(),a)},qe=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return be({...t,target:e})},Tr=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:n=[]}=t||{};if(n!=null&&!Array.isArray(n))throw new TypeError("Expected `appArguments` as Array type");return be({...t,app:{name:e,arguments:n}})};function At(e){if(typeof e=="string"||Array.isArray(e))return e;let{[Pt]:t}=e;if(!t)throw new Error(`${Pt} is not supported`);return t}function He({[Y]:e},{wsl:t}){if(t&&he)return At(t);if(!e)throw new Error(`${Y} is not supported`);return At(e)}var Ce={};Be(Ce,"chrome",()=>He({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Be(Ce,"firefox",()=>He({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Be(Ce,"edge",()=>He({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));qe.apps=Ce;qe.openApp=Tr;Tt.exports=qe});var $t=C((gi,Ut)=>{var Rt=Array.prototype.slice,jt=typeof Object.keys=="function"?Object.keys:function(e){var t=[];for(var n in e)t.push(n);return t},kt=Ut.exports=function(e,t){return e===0&&t===0?kr(e,t):e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():Lt(e)?Lt(t):typeof e!="object"&&typeof t!="object"?e==t:_r(e,t)};function _t(e){return e==null}function Mt(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function Lt(e){return typeof e=="number"&&e!==e}function kr(e,t){return 1/e===1/t}function _r(e,t){if(_t(e)||_t(t)||e.prototype!==t.prototype)return!1;if(Mt(e))return Mt(t)?(e=Rt.call(e),t=Rt.call(t),kt(e,t)):!1;try{var n=jt(e),o=jt(t),i,s}catch{return!1}if(n.length!=o.length)return!1;for(n.sort(),o.sort(),s=n.length-1;s>=0;s--)if(n[s]!=o[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!kt(e[i],t[i]))return!1;return!0}});var Ht=C((bi,qt)=>{"use strict";var Bt="[a-fA-F\\d:]",j=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Bt})|(?<=${Bt})(?=\\s|$))`:"",N="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",b="[a-fA-F\\d]{1,4}",we=`
(?:
(?:${b}:){7}(?:${b}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${b}:){6}(?:${N}|:${b}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${b}:){5}(?::${N}|(?::${b}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${b}:){4}(?:(?::${b}){0,1}:${N}|(?::${b}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${b}:){3}(?:(?::${b}){0,2}:${N}|(?::${b}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${b}:){2}(?:(?::${b}){0,3}:${N}|(?::${b}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${b}:){1}(?:(?::${b}){0,4}:${N}|(?::${b}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${b}){0,5}:${N}|(?::${b}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Mr=new RegExp(`(?:^${N}$)|(?:^${we}$)`),Lr=new RegExp(`^${N}$`),Ur=new RegExp(`^${we}$`),Ge=e=>e&&e.exact?Mr:new RegExp(`(?:${j(e)}${N}${j(e)})|(?:${j(e)}${we}${j(e)})`,"g");Ge.v4=e=>e&&e.exact?Lr:new RegExp(`${j(e)}${N}${j(e)}`,"g");Ge.v6=e=>e&&e.exact?Ur:new RegExp(`${j(e)}${we}${j(e)}`,"g");qt.exports=Ge});var Wt=C((Ci,$r)=>{$r.exports={name:"is2",version:"2.0.9",description:"A type checking library where each exported function returns either true or false and does not throw. Also added tests.",license:"MIT",tags:["type","check","checker","checking","utilities","network","networking","credit","card","validation"],keywords:["type","check","checker","checking","utilities","network","networking","credit","card","validation"],author:"Enrico Marino <enrico.marino@email.com>",maintainers:"Edmond Meinfelder <edmond@stdarg.com>, Chris Oyler <christopher.oyler@gmail.com>",homepage:"http://github.com/stdarg/is2",repository:{type:"git",url:"git@github.com:stdarg/is2.git"},bugs:{url:"http://github.com/stdarg/is/issues"},main:"./index.js",scripts:{test:"./node_modules/.bin/mocha -C --reporter list tests.js"},engines:{node:">=v0.10.0"},dependencies:{"deep-is":"^0.1.3","ip-regex":"^4.1.0","is-url":"^1.2.4"},devDependencies:{mocha:"6.2.3",mongodb:"3.2.4"}}});var Yt=C((yi,Gt)=>{Gt.exports=Wr;var Br=/^(?:\w+:)?\/\/(\S+)$/,qr=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,Hr=/^[^\s\.]+\.\S{2,}$/;function Wr(e){if(typeof e!="string")return!1;var t=e.match(Br);if(!t)return!1;var n=t[1];return n?!!(qr.test(n)||Hr.test(n)):!1}});var Qt=C(Vt=>{"use strict";var zt={}.hasOwnProperty,f={}.toString,r=Vt,Gr=$t(),Yr=Ht();r.version=Wt().version;r.browser=function(){return!r.node()&&typeof window<"u"&&f.call(window)==="[object global]"};r.defined=function(e){return typeof e<"u"};r.def=r.defined;r.nodejs=function(){return process&&process.hasOwnProperty("version")&&process.hasOwnProperty("versions")};r.node=r.nodejs;r.undefined=function(e){return e===void 0};r.udef=r.undef=r.undefined;r.array=function(e){return f.call(e)==="[object Array]"};r.arr=r.ary=r.arry=r.array;r.arrayLike=function(e){return r.nullOrUndef(e)?!1:e!==void 0&&zt.call(e,"length")&&isFinite(e.length)};r.arrLike=r.arryLike=r.aryLike=r.arraylike=r.arrayLike;r.arguments=function(e){return f.call(e)==="[object Arguments]"};r.args=r.arguments;r.boolean=function(e){return f.call(e)==="[object Boolean]"};r.bool=r.boolean;r.buffer=function(e){return r.nodejs()&&Buffer&&Buffer.hasOwnProperty("isBuffer")&&Buffer.isBuffer(e)};r.buff=r.buf=r.buffer;r.date=function(e){return f.call(e)==="[object Date]"};r.error=function(e){return f.call(e)==="[object Error]"};r.err=r.error;r.false=function(e){return e===!1};r.function=function(e){return r.syncFunction(e)||r.asyncFunction(e)};r.fun=r.func=r.function;r.asyncFunction=function(e){return f.call(e)==="[object AsyncFunction]"};r.asyncFun=r.asyncFunc=r.asyncFunction;r.syncFunction=function(e){return f.call(e)==="[object Function]"};r.syncFun=r.syncFunc=r.syncFunction;r.null=function(e){return e===null};r.nullOrUndefined=function(e){return e===null||typeof e>"u"};r.nullOrUndef=r.nullOrUndefined;r.number=function(e){return f.call(e)==="[object Number]"};r.num=r.number;r.object=function(e){return f.call(e)==="[object Object]"};r.obj=r.object;r.regExp=function(e){return f.call(e)==="[object RegExp]"};r.re=r.regexp=r.regExp;r.string=function(e){return f.call(e)==="[object String]"};r.str=r.string;r.true=function(e){return e===!0};var zr=new RegExp("[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}","i");r.uuid=function(e){return zr.test(e)};r.equal=function(e,t){var n=f.call(e);return typeof e!=typeof t||n!==f.call(t)?!1:n==="[object Object]"||n==="[object Array]"?Gr(e,t):n==="[object Function]"?e.prototype===t.prototype:n==="[object Date]"?e.getTime()===t.getTime():e===t};r.objEquals=r.eq=r.equal;var Vr={boolean:1,number:1,string:1,undefined:1};r.hosted=function(e,t){if(r.nullOrUndef(e))return!1;var n=typeof t[e];return n==="object"?!!t[e]:!Vr[n]};r.instanceOf=function(e,t){return r.nullOrUndef(e)||r.nullOrUndef(t)?!1:e instanceof t};r.instOf=r.instanceof=r.instanceOf;r.objectInstanceOf=function(e,t){try{return f.call(e)==="[object Object]"&&e instanceof t}catch{return!1}};r.instOf=r.instanceOf=r.objInstOf=r.objectInstanceOf;r.type=function(e,t){return typeof e===t};r.a=r.type;r.empty=function(e){var t=f.call(e);if(t==="[object Array]"||t==="[object Arguments]")return e.length===0;if(t==="[object Object]"){for(var n in e)if(zt.call(e,n))return!1;return!0}return t==="[object String]"?e==="":!1};r.emptyArguments=function(e){return f.call(e)==="[object Arguments]"&&e.length===0};r.noArgs=r.emptyArgs=r.emptyArguments;r.emptyArray=function(e){return f.call(e)==="[object Array]"&&e.length===0};r.emptyArry=r.emptyAry=r.emptyArray;r.emptyArrayLike=function(e){return e.length===0};r.emptyArrLike=r.emptyArrayLike;r.emptyString=function(e){return r.string(e)&&e.length===0};r.emptyStr=r.emptyString;r.nonEmptyArray=function(e){return f.call(e)==="[object Array]"&&e.length>0};r.nonEmptyArr=r.nonEmptyArry=r.nonEmptyAry=r.nonEmptyArray;r.nonEmptyObject=function(e){return f.call(e)==="[object Object]"&&Object.keys(e).length>0};r.nonEmptyObj=r.nonEmptyObject;r.emptyObject=function(e){return f.call(e)==="[object Object]"&&Object.keys(e).length===0};r.emptyObj=r.emptyObject;r.nonEmptyString=function(e){return r.string(e)&&e.length>0};r.nonEmptyStr=r.nonEmptyString;r.even=function(e){return f.call(e)==="[object Number]"&&e%2===0};r.decimal=function(e){return f.call(e)==="[object Number]"&&e%1!==0};r.dec=r.decNum=r.decimal;r.integer=function(e){return f.call(e)==="[object Number]"&&e%1===0};r.int=r.integer;r.notANumber=function(e){return!r.num(e)||e!==e};r.nan=r.notANum=r.notANumber;r.odd=function(e){return!r.decimal(e)&&f.call(e)==="[object Number]"&&e%2!==0};r.oddNumber=r.oddNum=r.odd;r.positiveNumber=function(e){return f.call(e)==="[object Number]"&&e>0};r.pos=r.positive=r.posNum=r.positiveNum=r.positiveNumber;r.negativeNumber=function(e){return f.call(e)==="[object Number]"&&e<0};r.neg=r.negNum=r.negativeNum=r.negativeNumber;r.negativeInteger=function(e){return f.call(e)==="[object Number]"&&e%1===0&&e<0};r.negativeInt=r.negInt=r.negativeInteger;r.positiveInteger=function(e){return f.call(e)==="[object Number]"&&e%1===0&&e>0};r.posInt=r.positiveInt=r.positiveInteger;r.divisibleBy=function(e,t){return e===0?!1:f.call(e)==="[object Number]"&&t!==0&&e%t===0};r.divBy=r.divisBy=r.divisibleBy;r.greaterOrEqualTo=function(e,t){return e>=t};r.greaterOrEqual=r.ge=r.greaterOrEqualTo;r.greaterThan=function(e,t){return e>t};r.gt=r.greaterThan;r.lessThanOrEqualTo=function(e,t){return e<=t};r.lessThanOrEq=r.lessThanOrEqual=r.le=r.lessThanOrEqualTo;r.lessThan=function(e,t){return e<t};r.lt=r.lessThan;r.maximum=function(e,t){if(!r.arrayLike(t)||!r.number(e))return!1;for(var n=t.length;--n>-1;)if(e<t[n])return!1;return!0};r.max=r.maximum;r.minimum=function(e,t){if(!r.arrayLike(t)||!r.number(e))return!1;for(var n=t.length;--n>-1;)if(e>t[n])return!1;return!0};r.min=r.minimum;r.within=function(e,t,n){return e>=t&&e<=n};r.withIn=r.within;r.prettyClose=function(e,t,n){return!r.number(e)||!r.number(t)||r.defined(n)&&!r.posInt(n)?!1:(r.undefined(n)&&(n=2),e.toFixed(n)===t.toFixed(n))};r.closish=r.near=r.prettyClose;r.dnsAddress=function(e){return!(!r.nonEmptyStr(e)||e.length>255||Jr.test(e)||!Qr.test(e))};r.dnsAddr=r.dns=r.dnsAddress;var Qr=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,Jr=/^([0-9]|[0-9][0-9\-]{0,61}[0-9])(\.([0-9]|[0-9][0-9\-]{0,61}[0-9]))*$/;r.emailAddress=function(e){return r.nonEmptyStr(e)?Zr.test(e):!1};r.email=r.emailAddr=r.emailAddress;var Zr=/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/;r.ipv4Address=function(e){if(!r.nonEmptyStr(e)||e.length>15)return!1;var t=e.split(".");if(!r.array(t)||t.length!==4)return!1;for(var n=0;n<t.length;n++){var o=parseInt(t[n],10);if(isNaN(o)||o<0||o>255)return!1}return!0};r.ipv4=r.ipv4Addr=r.ipv4Address;r.ipv6Address=function(e){return r.nonEmptyStr(e)?Yr.v6({extract:!0}).test(e):!1};r.ipv6=r.ipv6Addr=r.ipv6Address;r.ipAddress=function(e){return r.nonEmptyStr(e)?r.ipv4Address(e)||r.ipv6Address(e):!1};r.ip=r.ipAddr=r.ipAddress;r.hostAddress=function(e){return r.nonEmptyStr(e)?r.dns(e)||r.ipv4(e)||r.ipv6(e):!1};r.host=r.hostIp=r.hostAddr=r.hostAddress;r.port=function(e){return!(!r.num(e)||r.negativeInt(e)||e>65535)};r.systemPort=function(e){return!!(r.port(e)&&e<1024)};r.sysPort=r.systemPort;r.userPort=function(e){return!!(r.port(e)&&e>1023)};r.creditCardNumber=function(e){if(!r.str(e))return!1;var t=e.split(""),n,o;for(n=t.length-1,o=1;n>-1;n--,o++)o%2===0&&(t[n]*=2);e=t.join("");var i=0;for(n=0;n<e.length;n++)i+=Math.floor(e[n]);return i%10===0};r.creditCard=r.creditCardNum=r.creditCardNumber;r.americanExpressCardNumber=function(e){if(!r.str(e)||e.length!==15)return!1;var t=Math.floor(e.slice(0,2));return!(t!==34&&t!==37||!r.creditCardNumber(e))};r.amexCard=r.amexCardNum=r.americanExpressCardNumber;r.chinaUnionPayCardNumber=function(e){if(!r.str(e)||e.length<16&&e.length>19)return!1;var t=Math.floor(e.slice(0,2));return!(t!==62&&t!==88)};r.chinaUnion=r.chinaUnionPayCard=r.chinaUnionPayCardNumber;r.dinersClubCarteBlancheCardNumber=function(e){if(!r.str(e)||e.length!==14)return!1;var t=Math.floor(e.slice(0,3));return!(t<300||t>305||!r.creditCardNumber(e))};r.dinersClubCB=r.dinersClubCarteBlancheCard=r.dinersClubCarteBlancheCardNumber;r.dinersClubInternationalCardNumber=function(e){if(!r.str(e)||e.length!==14)return!1;var t=Math.floor(e.slice(0,3)),n=Math.floor(e.slice(0,2));return!((t<300||t>305)&&t!==309&&n!==36&&(n<38||n>39)||!r.creditCardNumber(e))};r.dinersClubInt=r.dinersClubInternationalCard=r.dinersClubInternationalCardNumber;r.dinersClubUSACanadaCardNumber=function(e){if(!r.str(e)||e.length!==16)return!1;var t=Math.floor(e.slice(0,2));return!(t!==54&&t!==55||!r.creditCardNumber(e))};r.dinersClub=r.dinersClubUSACanCard=r.dinersClubUSACanadaCardNumber;r.discoverCardNumber=function(e){if(!r.str(e)||e.length!==16)return!1;var t=Math.floor(e.slice(0,6)),n=Math.floor(e.slice(0,3));return!(e.slice(0,4)!=="6011"&&(t<622126||t>622925)&&(n<644||n>649)&&e.slice(0,2)!=="65"||!r.creditCardNumber(e))};r.discover=r.discoverCard=r.discoverCardNumber;r.instaPaymentCardNumber=function(e){if(!r.str(e)||e.length!==16)return!1;var t=Math.floor(e.slice(0,3));return!(t<637||t>639||!r.creditCardNumber(e))};r.instaPayment=r.instaPaymentCardNumber;r.jcbCardNumber=function(e){if(!r.str(e)||e.length!==16)return!1;var t=Math.floor(e.slice(0,4));return!(t<3528||t>3589||!r.creditCardNumber(e))};r.jcb=r.jcbCard=r.jcbCardNumber;r.laserCardNumber=function(e){if(!r.str(e)||e.length<16&&e.length>19)return!1;var t=Math.floor(e.slice(0,4)),n=[6304,6706,6771,6709];return!(n.indexOf(t)===-1||!r.creditCardNumber(e))};r.laser=r.laserCard=r.laserCardNumber;r.maestroCardNumber=function(e){if(!r.str(e)||e.length<12||e.length>19)return!1;var t=e.slice(0,4),n=["5018","5020","5038","5612","5893","6304","6759","6761","6762","6763","0604","6390"];return!(n.indexOf(t)===-1||!r.creditCardNumber(e))};r.maestro=r.maestroCard=r.maestroCardNumber;r.dankortCardNumber=function(e){return!(!r.str(e)||e.length!==16||e.slice(0,4)!=="5019"||!r.creditCardNumber(e))};r.dankort=r.dankortCard=r.dankortCardNumber;r.masterCardCardNumber=function(e){if(!r.str(e)||e.length!==16)return!1;var t=Math.floor(e.slice(0,2));return!(t<50||t>55||!r.creditCardNumber(e))};r.masterCard=r.masterCardCard=r.masterCardCardNumber;r.visaCardNumber=function(e){return!(!r.str(e)||e.length!==13&&e.length!==16||e.slice(0,1)!=="4"||!r.creditCardNumber(e))};r.visa=r.visaCard=r.visaCardNumber;r.visaElectronCardNumber=function(e){if(!r.str(e)||e.length!==16)return!1;var t=Math.floor(e.slice(0,4)),n=[4026,4405,4508,4844,4913,4917];return e.slice(0,6)!=="417500"&&n.indexOf(t)===-1||!r.creditCardNumber(e),!1};r.visaElectron=r.visaElectronCard=r.visaElectronCardNumber;var Xr=/^[0-9a-fA-F]{24}$/;r.mongoId=r.objectId=r.objId=function(e){return!!e&&!Array.isArray(e)&&Xr.test(String(e))};r.matching=r.match=r.inArgs=function(e){if(arguments.length<2)return!1;for(var t=!1,n=1;n<arguments.length;n++){var o=r.equal(e,arguments[n]);t=t||o}return t};r.streetAddress=function(e){if(!r.str(e))return!1;var t=/\b\d+[\s](?:[A-Za-z0-9.-]+[\s]+)+\b(ALLEY|ALY|AVENUE|AVE|BEND|BND|BLUFFS?|BLFS?|BOULEVARD|BLVD|BRANCH|BR|CENTERS?|CTRS?|CIRCLES?|CIRS?|CLIFFS?|CLFS?|COURTS?|CTS?|COVES?|CVS?|CREEK|CRK|CRESCENT|CRES|CREST|CRST|CROSSING|XING|DRIVES?|DRS?|EXPRESSWAY|EXPY|FREEWAY|FWY|HEIGHTS|HTS|HIGHWAY|HWY|HILLS?|HLS?|LANE|LN|LOOP|MANORS?|MNRS?|MOTORWAY|MTWY|MOUNT|MT|PARKS?|PARKWAYS?|PKWY|PASS|PLACE|PL|PLAZA|PLZ|POINTS?|PTS?|RIDGES?|RDGS?|ROADS?|RDS?|ROUTE|RTE?|SHOALS?|SHLS?|SHORES?|SHRS?|SPRINGS?|SPGS?|SPURS?|STREETS?|STS?|SUMMIT|SMT|TERRACE|TER|THROUGHWAY|TRWY|TRAFFICWAY|TRFY|TRAIL|TRL|TURNPIKE|TPKE|VALLEYS?|VLYS?|WAYS?)+(?:[\.\-\s\,]?)*((APARTMENT|APT|APPT|#|NUMBER|NUM|FLOOR|FL|\s)?(\d)*)\b/ig;return t.test(e)};r.street=r.address=r.streetAddress;r.zipCode=function(e){if(r.undefined(e)||!(r.string(e)||r.number(e)))return!1;var t=/^\d{5}(?:-\d{4})?$/;return t.test(e)};r.zip=r.zipCode;r.phoneNumber=function(e){if(!r.string(e))return!1;var t=/(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:(\(?)(?:(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]‌​)\s*)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\)?)\s*(?:[.-]\s*)?)?([2-9]1[02-‌​9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})/g;return t.test(e)};r.phone=r.phoneNumber;var Kr=Yt();r.url=function(e){return Kr(e)};r.uri=r.url;r.enumerator=function(e,t){var n=!1;if(!r.defined(e)||!r.defined(t)||!r.arrayLike(t))return n;for(var o=0,i=t.length;o<i;o++)if(r.equal(e,t[o])){n=!0;break}return n};r.enum=r.inArray=r.enumerator});var Zt=C((xi,Jt)=>{var V=1e3,Q=V*60,J=Q*60,L=J*24,eo=L*7,to=L*365.25;Jt.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return no(e);if(n==="number"&&isFinite(e))return t.long?oo(e):ro(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function no(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),o=(t[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return n*to;case"weeks":case"week":case"w":return n*eo;case"days":case"day":case"d":return n*L;case"hours":case"hour":case"hrs":case"hr":case"h":return n*J;case"minutes":case"minute":case"mins":case"min":case"m":return n*Q;case"seconds":case"second":case"secs":case"sec":case"s":return n*V;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function ro(e){var t=Math.abs(e);return t>=L?Math.round(e/L)+"d":t>=J?Math.round(e/J)+"h":t>=Q?Math.round(e/Q)+"m":t>=V?Math.round(e/V)+"s":e+"ms"}function oo(e){var t=Math.abs(e);return t>=L?xe(e,t,L,"day"):t>=J?xe(e,t,J,"hour"):t>=Q?xe(e,t,Q,"minute"):t>=V?xe(e,t,V,"second"):e+" ms"}function xe(e,t,n,o){var i=t>=n*1.5;return Math.round(e/n)+" "+o+(i?"s":"")}});var Ye=C((vi,Xt)=>{function io(e){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=i,n.enabled=a,n.humanize=Zt(),n.destroy=m,Object.keys(e).forEach(c=>{n[c]=e[c]}),n.names=[],n.skips=[],n.formatters={};function t(c){let d=0;for(let g=0;g<c.length;g++)d=(d<<5)-d+c.charCodeAt(g),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=t;function n(c){let d,g=null;function x(...F){if(!x.enabled)return;let M=x,de=Number(new Date),Jn=de-(d||de);M.diff=Jn,M.prev=d,M.curr=de,d=de,F[0]=n.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let fe=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(De,Zn)=>{if(De==="%%")return"%";fe++;let ct=n.formatters[Zn];if(typeof ct=="function"){let Xn=F[fe];De=ct.call(M,Xn),F.splice(fe,1),fe--}return De}),n.formatArgs.call(M,F),(M.log||n.log).apply(M,F)}return x.namespace=c,x.useColors=n.useColors(),x.color=n.selectColor(c),x.extend=o,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>g===null?n.enabled(c):g,set:F=>{g=F}}),typeof n.init=="function"&&n.init(x),x}function o(c,d){let g=n(this.namespace+(typeof d>"u"?":":d)+c);return g.log=this.log,g}function i(c){n.save(c),n.names=[],n.skips=[];let d,g=(typeof c=="string"?c:"").split(/[\s,]+/),x=g.length;for(d=0;d<x;d++)g[d]&&(c=g[d].replace(/\*/g,".*?"),c[0]==="-"?n.skips.push(new RegExp("^"+c.substr(1)+"$")):n.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...n.names.map(u),...n.skips.map(u).map(d=>"-"+d)].join(",");return n.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let d,g;for(d=0,g=n.skips.length;d<g;d++)if(n.skips[d].test(c))return!1;for(d=0,g=n.names.length;d<g;d++)if(n.names[d].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function l(c){return c instanceof Error?c.stack||c.message:c}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Xt.exports=io});var Kt=C((S,ve)=>{S.formatArgs=ao;S.save=co;S.load=uo;S.useColors=so;S.storage=lo();S.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function so(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ao(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ve.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(o=n))}),e.splice(o,0,t)}S.log=console.debug||console.log||(()=>{});function co(e){try{e?S.storage.setItem("debug",e):S.storage.removeItem("debug")}catch{}}function uo(){let e;try{e=S.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function lo(){try{return localStorage}catch{}}ve.exports=Ye()(S);var{formatters:fo}=ve.exports;fo.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var tn=C((Ei,en)=>{"use strict";en.exports=(e,t=process.argv)=>{let n=e.startsWith("-")?"":e.length===1?"-":"--",o=t.indexOf(n+e),i=t.indexOf("--");return o!==-1&&(i===-1||o<i)}});var on=C((Si,rn)=>{"use strict";var mo=require("os"),nn=require("tty"),O=tn(),{env:y}=process,k;O("no-color")||O("no-colors")||O("color=false")||O("color=never")?k=0:(O("color")||O("colors")||O("color=true")||O("color=always"))&&(k=1);"FORCE_COLOR"in y&&(y.FORCE_COLOR==="true"?k=1:y.FORCE_COLOR==="false"?k=0:k=y.FORCE_COLOR.length===0?1:Math.min(parseInt(y.FORCE_COLOR,10),3));function ze(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Ve(e,t){if(k===0)return 0;if(O("color=16m")||O("color=full")||O("color=truecolor"))return 3;if(O("color=256"))return 2;if(e&&!t&&k===void 0)return 0;let n=k||0;if(y.TERM==="dumb")return n;if(process.platform==="win32"){let o=mo.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in y)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in y)||y.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in y)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(y.TEAMCITY_VERSION)?1:0;if(y.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in y){let o=parseInt((y.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(y.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(y.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(y.TERM)||"COLORTERM"in y?1:n}function po(e){let t=Ve(e,e&&e.isTTY);return ze(t)}rn.exports={supportsColor:po,stdout:ze(Ve(!0,nn.isatty(1))),stderr:ze(Ve(!0,nn.isatty(2)))}});var an=C((w,Se)=>{var ho=require("tty"),Ee=require("util");w.init=vo;w.log=yo;w.formatArgs=bo;w.save=wo;w.load=xo;w.useColors=go;w.destroy=Ee.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");w.colors=[6,2,3,4,5,1];try{let e=on();e&&(e.stderr||e).level>=2&&(w.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}w.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),o=process.env[t];return/^(yes|on|true|enabled)$/i.test(o)?o=!0:/^(no|off|false|disabled)$/i.test(o)?o=!1:o==="null"?o=null:o=Number(o),e[n]=o,e},{});function go(){return"colors"in w.inspectOpts?!!w.inspectOpts.colors:ho.isatty(process.stderr.fd)}function bo(e){let{namespace:t,useColors:n}=this;if(n){let o=this.color,i="\x1B[3"+(o<8?o:"8;5;"+o),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Se.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Co()+t+" "+e[0]}function Co(){return w.inspectOpts.hideDate?"":new Date().toISOString()+" "}function yo(...e){return process.stderr.write(Ee.format(...e)+`
`)}function wo(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function xo(){return process.env.DEBUG}function vo(e){e.inspectOpts={};let t=Object.keys(w.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=w.inspectOpts[t[n]]}Se.exports=Ye()(w);var{formatters:sn}=Se.exports;sn.o=function(e){return this.inspectOpts.colors=this.useColors,Ee.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};sn.O=function(e){return this.inspectOpts.colors=this.useColors,Ee.inspect(e,this.inspectOpts)}});var cn=C((Fi,Qe)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Qe.exports=Kt():Qe.exports=an()});var hn=C(U=>{"use strict";U.check=mn;U.waitUntilFreeOnHost=So;U.waitUntilFree=Fo;U.waitUntilUsedOnHost=pn;U.waitUntilUsed=Oo;U.waitForStatus=Oe;var A=Qt(),Eo=require("net"),un=require("util"),Fe=cn()("tcp-port-used"),ln=2e3,dn=250;function fn(){var e,t,n=new Promise(function(o,i){e=o,t=i});return{resolve:e,reject:t,promise:n}}function Z(e,t,n,o,i){var s={};return s.port=e,s.host=t,s.inUse=n,s.retryTimeMs=o,s.timeOutMs=i,s}function mn(e,t){var n=fn(),o=!0,i,s;if(A.obj(e)?s=e:s=Z(e,t),!A.port(s.port))return Fe("Error invalid port: "+un.inspect(s.port)),n.reject(new Error("invalid port: "+un.inspect(s.port))),n.promise;A.nullOrUndefined(s.host)&&(Fe("set host address to default 127.0.0.1"),s.host="127.0.0.1");function a(){i&&(i.removeAllListeners("connect"),i.removeAllListeners("error"),i.end(),i.destroy(),i.unref())}function u(){n.resolve(o),a()}function l(m){m.code!=="ECONNREFUSED"?n.reject(m):(o=!1,n.resolve(o)),a()}return i=new Eo.Socket,i.once("connect",u),i.once("error",l),i.connect({port:s.port,host:s.host},function(){}),n.promise}function Oe(e,t,n,o,i){var s=fn(),a,u=!1,l,m;if(A.obj(e)?m=e:m=Z(e,t,n,o,i),!A.bool(m.inUse))return s.reject(new Error("inUse must be a boolean")),s.promise;A.positiveInt(m.retryTimeMs)||(m.retryTimeMs=dn,Fe("set retryTime to default "+dn+"ms")),A.positiveInt(m.timeOutMs)||(m.timeOutMs=ln,Fe("set timeOutMs to default "+ln+"ms"));function c(){a&&clearTimeout(a),l&&clearTimeout(l)}function d(){u=!0,c(),s.reject(new Error("timeout"))}a=setTimeout(d,m.timeOutMs);function g(){mn(m.port,m.host).then(function(x){if(!u)if(x===m.inUse){s.resolve(),c();return}else{l=setTimeout(function(){g()},m.retryTimeMs);return}},function(x){u||(s.reject(x),c())})}return g(),s.promise}function So(e,t,n,o){var i;return A.obj(e)?(i=e,i.inUse=!1):i=Z(e,t,!1,n,o),Oe(i)}function Fo(e,t,n){var o;return A.obj(e)?(o=e,o.host="127.0.0.1",o.inUse=!1):o=Z(e,"127.0.0.1",!1,t,n),Oe(o)}function pn(e,t,n,o){var i;return A.obj(e)?(i=e,i.inUse=!0):i=Z(e,t,!0,n,o),Oe(i)}function Oo(e,t,n){var o;return A.obj(e)?(o=e,o.host="127.0.0.1",o.inUse=!0):o=Z(e,"127.0.0.1",!0,t,n),pn(o)}});var ni={};or(ni,{activate:()=>ei,deactivate:()=>ti});module.exports=ir(ni);var re=p(require("vscode"));var B=p(require("vscode")),Ne=p(oe());var Dr=We(),Rr="https://github.com/nils-soderman/vscode-unreal-python/wiki/",z=class{static{this.failedToConnect="Failed-to-connect-to-Unreal-Engine-%5BTroubleshooting%5D"}static{this.enableDevmode="How-to-enable-Developer-Mode-for-Python-in-Unreal-Engine"}};function jr(e){return Rr+e}function ye(e){let t=jr(e);Dr(t)}var T=p(require("vscode")),gn=p(hn()),v=p(require("path")),ie=p(require("os")),E=p(require("fs")),Po=We(),bn="VSCode-Unreal-Python",Xe="Unreal Python",Ze;function Cn(e){Ze=e}function No(){if(!Ze)throw Error("Extension Dir hasn't been set yet! This should be set on activation. This function cannot be called in top-level.");return Ze}var h=class{static{this.execute="execute/vscode_execute"}static{this.executeEntry="execute/vscode_execute_entry"}static{this.isDebugpyInstalled="debug/is_debugpy_installed"}static{this.installDebugPy="debug/install_debugpy"}static{this.startDebugServer="debug/start_debug_server"}static{this.getCurrentDebugpyPort="debug/current_debugy_port"}static{this.codeCompletionGetPath="setup_code_completion/get_stub_path"}static{this.isDevmodeEnabled="setup_code_completion/is_devmode_enabled"}static{this.buildDocumentationToC="documentation/build_toc"}static{this.getDocPageContent="documentation/get_page_content"}static getAbsPath(t){return v.join(No(),"python",`${t}.py`)}};function D(){let e;if(T.window.activeTextEditor){let t=T.window.activeTextEditor.document;e=T.workspace.getWorkspaceFolder(t.uri)}return T.workspace.getConfiguration("ue-python",e)}function Ke(){return T.debug.activeDebugSession!==void 0&&T.debug.activeDebugSession.name===Xe}function yn(e,t){return v.resolve(e).toLowerCase()===v.resolve(t).toLowerCase()}function et(e){return e.replace(/\\/g,"/")}function X(e=!0){let t=v.join(ie.tmpdir(),bn);return e&&!E.existsSync(t)&&E.mkdirSync(t),t}function wn(e=!0){let t;if(process.platform==="win32"?t=process.env.APPDATA:process.platform==="darwin"?t=v.join(ie.homedir(),"Library"):t=v.join(process.env.XDG_CONFIG_HOME||v.join(ie.homedir(),".config")),!!t)return t=v.join(t,bn),e&&!E.existsSync(t)&&E.mkdirSync(t),t}function xn(e,t){if(!v.isAbsolute(e)){let n=wn(!0);if(!n)return;e=v.join(n,e)}return typeof t=="object"&&(t=JSON.stringify(t)),E.writeFileSync(e,t),e}function vn(e,t=!1,n=void 0){if(!v.isAbsolute(e)){let i=wn(!0);if(!i)return n;e=v.join(i,e)}if(!E.existsSync(e))return n;let o=E.readFileSync(e,{encoding:"utf-8"});return t?JSON.parse(o):o}function En(){let e=X();E.existsSync(e)&&E.rmSync(e,{recursive:!0})}function tt(e){Po(e)}async function se(e,t){return!await gn.check(e,t)}async function Pe(e,t,n){for(let o=0;o<t;o++){let i=e+o;if(await se(i,n))return i}return null}var Je;function ae(e=!0){return!Je&&e&&(Je=T.window.createOutputChannel("UE Python")),Je}var ce=!1,ue=null,$=null;function Ao(e=!0){return!$&&e&&($=B.window.createStatusBarItem(B.StatusBarAlignment.Left,10),$.command="ue-python.selectInstance",$.tooltip="Connected Unreal Engine instance"),$}function nt(){$?.dispose(),$=null}function rt(e){let t=Ao();t&&(t.text=`$(unreal-engine) ${e.data.project_name}`,t.show())}function Sn(){let e=D(),t=e.get("remote.multicastTTL"),n=e.get("remote.multicastBindAddress"),o,i=e.get("remote.multicastGroupEndpoint");if(i){let[u,l]=i.split(":",2);o=[u,Number(l)]}let s,a=e.get("remote.commandEndpoint");if(a){let[u,l]=a.split(":",2);s=[u,Number(l)]}return new Ne.RemoteExecutionConfig(t,o,n,s)}async function Fn(e){let t=D(),n=e.commandEndpoint[0],o=e.commandEndpoint[1];if(t.get("strictPort")){if(!await se(o,n))return B.window.showErrorMessage(`Port ${o} is currently busy. Consider changing the config: 'ue-python.remote.commandEndpoint'.`),!1}else{let i=await Pe(o,101,n);if(!i)return B.window.showErrorMessage(`All ports between ${o} - ${o+100} are busy. Consider changing the config: 'ue-python.remote.commandEndpoint'.`),!1;o!==i&&(e.commandEndpoint[1]=i)}return!0}async function On(){let e=await ee(!1);return e?e.config.commandEndpoint[1]:null}async function ee(e=!0){if(!ue&&e){let t=Sn();await Fn(t)&&(ue=new Ne.RemoteExecution(t),ue.events.addEventListener("commandConnectionClosed",Io),await ue.start())}return ue}async function Pn(){let e=await ee();if(!e)return null;if(!e.hasCommandConnection()){let t=Sn();if(ce)return new Promise(n=>{let o=setInterval(()=>{ce||(clearInterval(o),n(Pn()))},1e3)});if(ce=!0,await Fn(t)){let o=D().get("remote.timeout")??3e3;try{let i=await e.getFirstRemoteNode(1e3,o);await e.openCommandConnection(i,!0,o),rt(i)}catch(i){let s=i.message;return s.startsWith("Timed out")&&(s="Timed out while trying to connect to Unreal Engine."),await B.window.showErrorMessage(s,"Help")==="Help"&&ye(z.failedToConnect),null}finally{ce=!1}}else return ce=!1,null}return e}async function Io(){(await ee(!1))?.hasCommandConnection()||nt()}async function To(e){let t=await Pn();if(!t)return;let n=!!D().get("execute.unattended");return t.runCommand(e,n)}function P(e,t={}){let n=`__file__=r'${e}';`;for(let[i,s]of Object.entries(t)){let a=s;typeof s=="string"&&(a=`r'${s}'`),n+=`${i}=${a};`}let o=`${n}f=open(r'${e}','r');exec(f.read());f.close()`;return To(o)}async function Nn(){(await ee(!1))?.stop()}var I=p(require("vscode")),q=p(require("path")),Tn=p(require("fs"));var Dn=p(oe()),Do="unreal.py",Rn="python",ot="analysis.extraPaths",An="ms-python.python",Ro="Intermediate/PythonStub";function jo(){return I.workspace.getConfiguration(Rn)}async function ko(){let e=h.getAbsPath(h.codeCompletionGetPath),t=await P(e,{});if(t){for(let n of t.output)if(n.type===Dn.ECommandOutputType.INFO)return n.output.trim()}return null}function _o(e){e=et(e);let t=jo(),n=t.get(ot);if(n===void 0)return!1;let o=[];for(let i of n){if(yn(i,e))return!0;et(q.resolve(i)).toLowerCase().endsWith(Ro.toLowerCase())&&o.push(i)}return n=n.filter(i=>!o.includes(i)),n.push(e),t.update(ot,n,!0),!0}async function In(e){let t=q.join(e,Do);if(Tn.existsSync(t)){let n=`${Rn}.${ot}`;_o(e)?await I.window.showInformationMessage(`Added "${e}" to the '${n}' config`,"Show Setting")==="Show Setting"&&I.commands.executeCommand("workbench.action.openSettings",n):await I.window.showErrorMessage(`Config '${n}' not found, make sure ${An} extension is installed and enabled`,"Show Extension")==="Show Extension"&&I.commands.executeCommand("workbench.extensions.search",An)}else await I.window.showErrorMessage("To setup code completion you first need to enable Developer Mode in Unreal Engine's Python plugin settings.","Help")==="Help"&&ye(z.enableDevmode)}async function jn(){let e=await ko();if(e)In(e);else if(await I.window.showErrorMessage("Failed to automatically get the path to current Unreal Engine project","Browse")==="Browse"){let n=await I.window.showOpenDialog({filters:{"Unreal Projects":["uproject"]},canSelectMany:!1,title:"Browse to the Unreal Engine project .uproject file",openLabel:"Select project"});if(n){let o=q.dirname(n[0].fsPath),i=q.join(o,"Intermediate","PythonStub");In(i)}}}var le=p(require("vscode")),Ln=p(require("crypto")),Un=p(require("path")),Ae=p(require("fs"));var _=p(require("vscode")),_n=p(require("fs"));function Lo(){if(!_.window.activeTextEditor)return;let e=_.window.activeTextEditor.document,t="",n=[_.window.activeTextEditor.selection];if(_.window.activeTextEditor.selections.length>1){n=[];for(let o of _.window.activeTextEditor.selections)n.push(o);n=n.sort(function(o,i){return o.start.line-i.start.line})}for(let o of n)if(!o.isEmpty){let i=-1;for(let u=0;u<=o.end.line-o.start.line;u++){let l=e.lineAt(o.start.line+u);if(!l.isEmptyOrWhitespace){i=l.firstNonWhitespaceCharacterIndex;break}}let s=t.split(`
`).length-1,a=`
`.repeat(o.start.line-s);t+=a+Uo(e.getText(o),i)}return t}function Uo(e,t){if(t<=0)return e;let n="",o=t,i=0;for(let s of e.split(`
`)){if(o)if(i===0)s=s.trimStart();else{let a=s.trimStart();if(!a||a[0]==="#")continue;let u=s.length-a.length;u<o&&(o=u),s=s.slice(o)}n+=s+`
`,i++}return n}function kn(e,t){return _n.writeFileSync(e,t),e}function Mn(e){if(!_.window.activeTextEditor)return;let t=_.window.activeTextEditor.document,n=Lo();return n?kn(e,n):t.isDirty?kn(e,t.getText()):t.uri.fsPath}var Bo="temp_exec";function $n(e){return Un.join(X(),`${Bo}-${e}.py`)}async function qo(e){let t=[$n(e)];for(let n of t)Ae.existsSync(n)&&Ae.unlinkSync(n)}function Ho(e,t){if(Ke()){le.debug.activeDebugConsole.appendLine(">>>");return}let n=ae();if(n){for(let o of e.output)n.appendLine(o.output.trimEnd());n.appendLine(">>>"),D().get("execute.showOutput")&&n.show(!0),qo(t)}}async function Bn(){if(!le.window.activeTextEditor)return;let e=Ln.randomUUID(),t=$n(e),n=Mn(t);if(!n)return;let o=D();if(o.get("execute.clearOutput")){let c=ae(!1);c&&c.clear()}let i=Ke(),s=o.get("execute.name"),a={file:n,__file__:le.window.activeTextEditor.document.uri.fsPath,__name__:s,isDebugging:i},u={vscode_globals:JSON.stringify(a)},l=h.getAbsPath(h.executeEntry),m=await P(l,u);m&&Ho(m,e)}var H=p(require("vscode")),Hn=p(require("crypto")),Wn=p(require("path"));var Ie=p(oe()),it="https://pypi.org/project/debugpy/",Go="https://github.com/nils-soderman/vscode-unreal-python/issues";async function Yo(){let e=h.getAbsPath(h.isDebugpyInstalled),t=await P(e,{});if(t){for(let n of t.output)if(n.type===Ie.ECommandOutputType.INFO)return n.output.trim().toLowerCase()==="true"}return!1}async function zo(){let e=h.getAbsPath(h.getCurrentDebugpyPort),t=await P(e,{});if(t){for(let n of t.output)if(n.type===Ie.ECommandOutputType.INFO)return Number(n.output)}return null}async function Vo(e=""){let t=h.getAbsPath(h.installDebugPy),n=Hn.randomUUID(),i=await P(t,{install_dir:e,success_id:n}),s="";if(i)for(let a of i.output){if(a.output.trim()===n)return!0;s+=`${a.output}
`}if(s){let a=ae(!0);a.appendLine(s),a.show(!0)}return H.window.showErrorMessage(`Failed to install [debugpy](${it}), consider installing it manually and make sure it's in the sys.path for Unreal Engine.`,"View on pypi.org","Report Bug").then(a=>{a==="Report Bug"&&tt(Go),a==="View on pypi.org"&&tt(it)}),!1}async function Qo(e){let t=h.getAbsPath(h.startDebugServer),o=await P(t,{debug_port:e});for(let i of o?.output??[])if(i.type===Ie.ECommandOutputType.INFO)return i.output.trim().toLowerCase()==="true";return!1}function qn(e){let t=Wn.basename(h.execute);H.debug.startDebugging(void 0,{name:Xe,type:"python",request:"attach",port:e,host:"localhost",rules:[{module:t,include:!1}]})}async function Gn(){let e=await Yo();if(e||await H.window.showWarningMessage(`Python module [debugpy](${it}) is required for debugging`,"Install")==="Install"&&(e=await Vo()),!e)return;let t=D(),n=t.get("debug.port");if(!n)return;let o=await zo();if(o)qn(o);else{let i=await On();if(t.get("strictPort"))await se(n)&&i!==n?o=n:H.window.showErrorMessage(`Port ${n} is currently busy. Please update the 'config ue-python.debug.port'.`);else{let s=i===n?n+1:n;o=await Pe(s,101),o||H.window.showErrorMessage(`All ports between ${n} -> ${n+100} are busy. Please update the 'config ue-python.debug.port'.`)}o&&await Qo(o)&&qn(o)}}var Yn=p(require("vscode"));async function zn(){let e=await ee();if(!e)return;let t=Yn.window.createQuickPick();t.placeholder="Searching for Unreal Engine instances...",t.busy=!0,t.onDidAccept(async()=>{if(t.hide(),t.selectedItems.length>0){let o=t.selectedItems[0];if(e.hasCommandConnection()){if(e.connectedNode===o.node)return;e.closeCommandConnection()}await e.openCommandConnection(o.node),rt(o.node)}t.dispose()}),t.onDidHide(()=>{e.stopSearchingForNodes(),t.dispose()});let n=[];e.events.addEventListener("nodeFound",o=>{let i={label:o.data.project_name,description:o.data.project_root,node:o};n.push(i),t.items=n}),e.events.addEventListener("nodeTimedOut",o=>{n=n.filter(i=>i.node.nodeId!==o.nodeId),t.items=n}),e.startSearchingForNodes(1e3),t.show()}var R=p(require("vscode")),Vn=p(require("crypto")),Te=p(require("path")),ne=p(require("fs"));var at=p(oe());function Qn(e){let t,n=R.window.activeTextEditor;if(n?.selections.length===1){let i=n.document.getText(n.selection);if(i){let s=i.trim().split(" ");if(s.length===1){let a=s[0];a.match(/^[a-zA-Z0-9_]+$/)&&(t=a)}}}let o=new st(e);return o.open(R.ViewColumn.Two,t),o}async function Xo(e){let t=h.getAbsPath(h.buildDocumentationToC),o=await P(t,{outFilepath:e});if(o){for(let i of o.output.reverse())if(i.type===at.ECommandOutputType.INFO)return i.output.trim().toLowerCase()==="true"}return!1}async function Ko(e,t){let n=h.getAbsPath(h.getDocPageContent),i=await P(n,{object:t,outFilepath:e});if(i){for(let s of i.output.reverse())if(s.type===at.ECommandOutputType.INFO)return s.output.trim().toLowerCase()==="true"}return!1}var st=class{constructor(t){this._extensionUri=t;this.pannelName="UE-Python-Documentation";this.title="Unreal Engine Python";this.dropDownAreaStates={};this.maxListItems={};this.initialFilter=void 0;this.webviewDirectory=R.Uri.joinPath(t,"webview-ui","build")}open(t=R.ViewColumn.Two,n){this.initialFilter=n,this.dropDownAreaStates=vn("documentation_dropDownArea_states.json",!0,{}),this.pannel=R.window.createWebviewPanel(this.pannelName,this.title,t,{enableScripts:!0,localResourceRoots:[this._extensionUri]}),this.pannel.webview.onDidReceiveMessage(o=>{this.onDidReceiveMessage(o)}),this.pannel.webview.html=this.getHtmlForWebview(this.pannel.webview)}async sendTableOfContents(){let t=Te.join(X(),"documentation_toc.json");if(!ne.existsSync(t)&&!await Xo(t))return;let n=ne.readFileSync(t),o=JSON.parse(n.toString());this.pannel&&this.pannel.webview.postMessage({command:"getTableOfContents",data:o})}async openDetailsPage(t,n){let o=Te.join(X(),`docpage_${t}.json`);ne.existsSync(o)||await Ko(o,t);let i=ne.readFileSync(o),s=JSON.parse(i.toString());this.pannel&&this.pannel.webview.postMessage({command:"getDocPage",data:{pageData:s,property:n}})}onDidReceiveMessage(t){switch(t.command){case"getTableOfContents":{this.sendTableOfContents();break}case"getDocPage":{this.openDetailsPage(t.data.object,t.data.property);break}case"storeDropDownAreaOpenState":{this.storeDropDownAreaOpenState(t.data.id,t.data.value);break}case"getDropDownAreaOpenStates":{this.pannel?.webview.postMessage({command:"getDropDownAreaOpenStates",data:this.dropDownAreaStates});break}case"storeMaxListItems":{this.maxListItems[t.data.id]=t.data.value;break}case"getMaxListItems":{this.pannel?.webview.postMessage({command:"getMaxListItems",data:this.maxListItems});break}case"getInitialFilter":{this.pannel?.webview.postMessage({command:"getInitialFilter",data:this.initialFilter}),this.initialFilter=void 0;break}default:throw new Error(`Not implemented: ${this.pannelName} recived an unknown command: '${t.command}'`)}}storeDropDownAreaOpenState(t,n){this.dropDownAreaStates[t]=n,xn("documentation_dropDownArea_states.json",this.dropDownAreaStates)}getHtmlForWebview(t){let n=Vn.randomUUID().replace(/-/g,""),o=require(Te.join(this.webviewDirectory.fsPath,"asset-manifest.json")),i=o.files["main.js"],s=o.files["main.css"],a=[];a.push(t.asWebviewUri(R.Uri.joinPath(this.webviewDirectory,s)));let u=[];u.push(t.asWebviewUri(R.Uri.joinPath(this.webviewDirectory,i)));let l="";for(let c of a)l+=`<link href="${c}" rel="stylesheet">
`;let m="";for(let c of u)m+=`<script nonce="${n}" src="${c}"></script>
`;return`<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="utf-8">
				<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
				${l}
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${n}';style-src vscode-resource: 'unsafe-inline' http: https: data:;">
				<base href="${t.asWebviewUri(this.webviewDirectory)}/">
			</head>
			<body>
				<noscript>You need to enable JavaScript to run this app.</noscript>
				<div id="root"></div>
				${m}
			</body>
			</html>`}};function ei(e){Cn(e.extensionPath),e.subscriptions.push(re.commands.registerCommand("ue-python.execute",()=>{Bn()})),e.subscriptions.push(re.commands.registerCommand("ue-python.attach",()=>{Gn()})),e.subscriptions.push(re.commands.registerCommand("ue-python.setupCodeCompletion",()=>{jn()})),e.subscriptions.push(re.commands.registerCommand("ue-python.openDocumentation",()=>{Qn(e.extensionUri)})),e.subscriptions.push(re.commands.registerCommand("ue-python.selectInstance",()=>{zn()}))}function ti(){En(),Nn(),nt()}0&&(module.exports={activate,deactivate});
